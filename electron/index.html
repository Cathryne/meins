<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>iWasWhere</title>
</head>
<body style="width:100%; height:100%; margin: 0; padding: 0">
<div>
    <webview src="http://localhost:7778/" style="height:100vh" preload="./preload.js" allowpopups></webview>
</div>
</body>
<script>
    // You can also require other files to run in this process
    require('./renderer.js')

    onload = () => {
        const webview = document.querySelector('webview');

        const handleRedirect = (e, callback) => {
            let url = e.url;
            if (!url.includes("localhost:7777")) {
                require('electron').shell.openExternal(url);
                e.preventDefault();
                e.stopPropagation();
                callback({ cancel: true });
                return false;
            }
        };
        webview.addEventListener('will-navigate', handleRedirect);
        webview.addEventListener('new-window', handleRedirect);
    }

</script>
</html>
